"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}var body=document.body,docEl=document.documentElement,grid=document.querySelector(".speaker-grid"),speakers=[].concat(_toConsumableArray(grid.querySelectorAll(".speaker"))),contents=[].concat(_toConsumableArray(document.querySelectorAll(".content > .content-item"))),closeTheSpeaker=document.querySelector(".close__close"),scrollPos=void 0,winsize=void 0,calcWinsize=function e(){return winsize={width:window.innerWidth,height:window.innerHeight}};calcWinsize();var getOffset=function e(t,o){var n=0,i="top"===o?"offsetTop":"offsetLeft";do{isNaN(t[i])||(n+=t[i])}while(t=t.offsetParent);return n},keys={37:1,38:1,39:1,40:1},preventDefault=function e(t){t=t||window.event,t.preventDefault&&t.preventDefault(),t.returnValue=!1},preventDefaultForScrollKeys=function e(t){if(keys[t.keyCode])return preventDefault(t),!1},disableScroll=function e(){window.addEventListener&&window.addEventListener("DOMMouseScroll",preventDefault,!1),window.onwheel=preventDefault,window.onmousewheel=document.onmousewheel=preventDefault,window.ontouchmove=preventDefault,document.onkeydown=preventDefaultForScrollKeys},enableScroll=function e(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",preventDefault,!1),window.onmousewheel=document.onmousewheel=null,window.onwheel=null,window.ontouchmove=null,document.onkeydown=null},hideOthers=function e(){var t=document.querySelectorAll(".speaker:not(.exclude)");TweenMax.staggerTo(t,.8,{scale:0,opacity:0,ease:Expo.easeInOut})},hideTexts=function e(t){TweenMax.to(t,.5,{ease:Quart.easeIn,delay:0,y:20,opacity:0})},showContentElems=function e(t,o){console.log(t);var n=t.querySelector(".content-item__title"),i=t.querySelector(".content-item__text"),r=document.querySelector(".content > .content__close");charming(n);var l=n.querySelectorAll("span"),s=l.length;n.style.opacity="1",TweenMax.to([r,i],.8,{ease:Expo.easeOut,delay:o,startAt:{y:60},y:0,opacity:1}),TweenMax.staggerFromTo(l,.6,{opacity:0,y:32},{opacity:1,y:0,ease:Back.easeOut,delay:1},.05)},getSizePosition=function e(t){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=window.pageYOffset||docEl.scrollTop||body.scrollTop,i=window.pageXOffset||docEl.scrollLeft||body.scrollLeft;return{width:t.offsetWidth,height:t.offsetHeight,left:o?getOffset(t,"left")-i:getOffset(t,"left"),top:o?getOffset(t,"top")-n:getOffset(t,"top")}};imagesLoaded(document.querySelectorAll(".speaker-img"),function(){body.classList.remove("loading");var e=new Masonry(grid,{itemSelector:".speaker",columnWidth:260,gutter:100,fitWidth:!0})});var openSpeaker=function e(t){if(!t.isAnimating){t.isAnimating=!0;var o=t.querySelector(".speaker__bg"),n=t.querySelector(".speaker__wrap"),i=t.querySelector(".speaker__img"),r=t.querySelector(".speaker__name"),l=document.querySelector(".speaker-grid");t.classList.add("exclude"),scrollPos=window.scrollY,disableScroll();var s=speakers.indexOf(t);hideOthers(),hideTexts(r);var a=getSizePosition(t);o.style.width=a.width+"px",o.style.height=a.height+"px",o.style.left=a.left+"px",o.style.top=a.top+"px",o.style.position="fixed",t.style.zIndex="1000";var c=Math.hypot(winsize.width,winsize.height);TweenMax.to(o,1.2,{ease:Expo.easeInOut,delay:.4,x:winsize.width/2-(a.left+a.width/2),y:winsize.height/2-(a.top+a.height/2),scaleX:c/a.width,scaleY:c/a.height,rotation:-1*t.angle*2});var d=contents[s];d.classList.add("content-item--current");var u=getSizePosition(n),w=getSizePosition(d.querySelector(".content-item__img"),!1);showContentElems(d,1),TweenMax.to(i,1.2,{ease:Expo.easeInOut,delay:.55,scaleX:w.width/u.width,scaleY:w.height/u.height,x:w.left+w.width/2-(u.left+u.width/2),y:w.top+w.height/2-(u.top+u.height/2),rotation:0,onComplete:function e(){i.style.opacity=0,d.querySelector(".content-item__img").style.visibility="visible",d.parentNode.style.position="absolute",l.classList.add("grid-wrap--hidden"),window.scrollTo(0,0),enableScroll(),t.isAnimating=!1}})}};