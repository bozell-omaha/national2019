"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}
// const speakers = document.querySelectorAll('.speaker:not(.speaker--clone)');
// const closeBtns = document.querySelectorAll('.close-speaker');
// const mobileCloseBtns = document.querySelectorAll('.close-speaker--mobile');
var body=document.body,docEl=document.documentElement,grid=document.querySelector(".speaker-grid"),speakers=_toConsumableArray(grid.querySelectorAll(".speaker")),contents=_toConsumableArray(document.querySelectorAll(".content > .content-item")),closeTheSpeaker=document.querySelector(".content__close"),contentWrapper=document.querySelector("#content"),contentPattern=document.querySelector(".content > .content__pattern"),scrollPos,activeSpeaker,winsize,calcWinsize=function e(){return winsize={width:window.innerWidth,height:window.innerHeight}};calcWinsize();// Calculates the offsetTop or offsetLeft of an element relative to the viewport
// (not counting with any transforms the element might have)
var getOffset=function e(t,n){for(var o=0,r="top"===n?"offsetTop":"offsetLeft";isNaN(t[r])||(o+=t[r]),t=t.offsetParent;);return o},keys={37:1,38:1,39:1,40:1},preventDefault=function e(t){(t=t||window.event).preventDefault&&t.preventDefault(),t.returnValue=!1},preventDefaultForScrollKeys=function e(t){if(keys[t.keyCode])return preventDefault(t),!1},disableScroll=function e(){window.addEventListener&&// older FF
window.addEventListener("DOMMouseScroll",preventDefault,!1),window.onwheel=preventDefault,// modern standard
window.onmousewheel=document.onmousewheel=preventDefault,// older browsers, IE
window.ontouchmove=preventDefault,// mobile
document.onkeydown=preventDefaultForScrollKeys},enableScroll=function e(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",preventDefault,!1),window.onmousewheel=document.onmousewheel=null,window.onwheel=null,window.ontouchmove=null,document.onkeydown=null},hideOthers=function e(){var t=document.querySelectorAll(".speaker:not(.exclude)");TweenMax.staggerTo(t,.8,{scale:0,opacity:0,ease:Expo.easeInOut})},showOthers=function e(){var t=document.querySelectorAll(".speaker:not(.exclude)");TweenMax.staggerTo(t,.8,{scale:1,opacity:1,ease:Expo.easeInOut,onComplete:function e(){t.forEach(function(e){e.style.transform="none"})}})},hideTexts=function e(t,n){TweenMax.to([t,n],.5,{ease:Quart.easeIn,delay:0,y:20,opacity:0})},showTexts=function e(t,n){TweenMax.to([t,n],1,{ease:Expo.easeOut,delay:1,y:0,opacity:1})},showContentElems=function e(t,n){
// toggle the back control and scroll indicator.
var o=t.querySelector(".content-item__title"),r=t.querySelector(".content-item__text"),a=document.querySelector(".content > .content__close");o.classList.contains("charmed")||(charming(o),o.classList.add("charmed"));// And access the spans/letters.
var i=o.querySelectorAll("span");TweenMax.to([a,r,contentPattern],.8,{ease:Expo.easeOut,delay:n,startAt:{y:60},y:0,opacity:1}),setTimeout(function(){i.forEach(function(e,t){var n=.05*t;TweenMax.to(e,.6,{ease:Back.easeOut,delay:n,startAt:{yPercent:"50%",opacity:0},yPercent:"0",opacity:1})})},1e3)},hideContentElems=function e(t,n){
// toggle the back control and scroll indicator.
var o=t.querySelector(".content-item__title"),r=t.querySelector(".content-item__text"),a=t.querySelector(".content-item__position"),i=document.querySelector(".content > .content__close"),s=o.querySelectorAll("span"),l=s.length;TweenMax.to([i,r,contentPattern,a],.8,{ease:Expo.easeIn,delay:0,startAt:null,y:60,opacity:0}),s.forEach(function(e,t){TweenMax.to(e,.3,{ease:Quart.easeIn,delay:.04*(l-t-1),yPercent:"50%",startAt:null,opacity:0})})},getSizePosition=function e(t,n){var o=!(1<arguments.length&&void 0!==n)||n,r=window.pageYOffset||docEl.scrollTop||body.scrollTop,a=window.pageXOffset||docEl.scrollLeft||body.scrollLeft;return{width:t.offsetWidth,height:t.offsetHeight,left:o?getOffset(t,"left")-a:getOffset(t,"left"),top:o?getOffset(t,"top")-r:getOffset(t,"top")}};//Disable/Enable Scroll Things
// Scroll control functions. Taken from https://stackoverflow.com/a/4770179.
// Preload images.
imagesLoaded(document.querySelectorAll(".speaker-img"),function(){body.classList.remove("loading");var e=new Masonry(grid,{
// options
itemSelector:".speaker",columnWidth:260,gutter:100,fitWidth:!0})}),speakers.forEach(function(t){var e=t.querySelector(".speaker__name");charming(e);var n=e.querySelectorAll("span");t.addEventListener("mouseenter",function(){animationHover(t,"mouseenter",n)}),t.addEventListener("mouseleave",function(){animationHover(t,"mouseleave",n)}),t.addEventListener("click",function(e){e.preventDefault(),openSpeaker(t)})}),closeTheSpeaker.addEventListener("click",function(e){e.preventDefault();// Get the content element respective to this grid item.
var t=document.querySelector(".content-item--current");closeItem(t)});var openSpeaker=function e(t){if(!t.isAnimating){t.isAnimating=!0,console.log(t);//grab elements we'll need
var n=t.querySelector(".speaker__bg"),o=t.querySelector(".speaker__wrap"),r=t.querySelector(".speaker__img"),a=t.querySelector(".speaker__name"),i=t.querySelector(".speaker__keynote"),s=document.querySelector(".speaker-grid");t.classList.add("exclude"),// Get the current scroll position.
scrollPos=window.scrollY,// Disable Scroll
disableScroll();//set the current value
var l=speakers.indexOf(t);activeSpeaker=l,//Hide all the other Speakers
hideOthers(),hideTexts(a,i);// Get the "grid__item-bg" width and height and set it explicitly,
// also set its top and left respective to the page.
var c=getSizePosition(t);console.log(c),n.style.width="".concat(c.width,"px"),n.style.height="".concat(c.height,"px"),n.style.left="".concat(c.left,"px"),n.style.top="".concat(c.top,"px"),// Set it to position fixed.
n.style.position="fixed",t.style.zIndex="1000";// Calculate the viewport diagonal. We will need to take this in consideration when scaling up the item´s bg element.
var u=Math.hypot(winsize.width,winsize.height);// Scale up the item´s bg element.
TweenMax.to(n,1.2,{ease:Expo.easeInOut,delay:.4,x:winsize.width/2-(c.left+c.width/2),y:winsize.height/2-(c.top+c.height/2),scaleX:u/c.width,scaleY:u/c.height});// Get the content element respective to this grid item.
var d=contents[l];// Set it to current.
d.classList.add("content-item--current");// Calculate the item´s image and content´s image sizes and positions.
// We need this so we can scale up and translate the item´s image to the same size and position of the content´s image.
var p=getSizePosition(o),y=getSizePosition(d.querySelector(".content-item__img"),!1);// Show the back control and scroll indicator and all the item´s content elements (1 second delay).
showContentElems(d,1),TweenMax.to(r,1.2,{ease:Expo.easeInOut,delay:.55,scaleX:y.width/p.width,scaleY:y.height/p.height,x:y.left+y.width/2-(p.left+p.width/2),y:y.top+y.height/2-(p.top+p.height/2),rotation:0,onComplete:function e(){
// Hide the item´s image and show the content´s image. Should both be overlapping.
r.style.opacity=0,d.querySelector(".content-item__img").style.visibility="visible",// Set the main content wrapper to absolute so it´s position at the top.
contentWrapper.style.position="initial",d.parentNode.style.position="absolute",// Hiding the grid scroll.
s.classList.add("grid-wrap--hidden"),// Scroll up the page.
window.scrollTo(0,0),// Enable page scrolling.
enableScroll(),t.isAnimating=!1}})}},closeItem=function e(t){if(!t.isAnimating){t.isAnimating=!0;var n=document.querySelector(".speaker-grid"),o=contents[activeSpeaker],r=o.querySelector(".content-item__img");// Get the content element respective to this grid item.
// Scroll to the previous scroll position before opening the item.
window.scrollTo(0,scrollPos),o.parentNode.style.position="fixed",// Disable page scrolling.
disableScroll(),// Showing the grid scroll.
n.classList.remove("grid-wrap--hidden");// The item that is open.
var a=speakers[activeSpeaker],i=a.querySelector(".speaker__img"),s=a.querySelector(".speaker__bg"),l=a.querySelector(".speaker__name"),c=a.querySelector(".speaker__keynote");// Hide the back control and scroll indicator and all the item´s content elements.
hideContentElems(o,0),// Set the grid´s image back to visible and hide the content´s one.
i.style.opacity=1,r.style.visibility="hidden",// Animate the grid´s image back to the grid position.
TweenMax.to(i,1.2,{ease:Expo.easeInOut,scaleX:1,scaleY:1,x:0,y:0,rotation:2*a.angle}),// And also the bg element.
TweenMax.to(s,1.2,{ease:Expo.easeInOut,delay:.15,x:0,y:0,scaleX:1,scaleY:1,rotation:0,onComplete:function e(){o.classList.remove("content-item--current"),a.classList.remove("exclude"),contentWrapper.style.position="relative",s.style.position="absolute",s.style.left="0px",s.style.top="0px",activeSpeaker=-1,// allowTilt = true;
a.style.zIndex=0,enableScroll(),t.isAnimating=!1}}),// Show all the grid items except the one we want to close.
showOthers(),// Also show the item texts. (1s delay)
showTexts(l,c)}},animationHover=function e(t,n,o){if(990<window.innerWidth){var r=t.querySelector(".speaker__bg");// Scale up the bg element.
TweenMax.to(r,1,{ease:Expo.easeOut,scale:"mouseenter"===n?1.15:1}),o.forEach(function(t,e){TweenMax.to(t,.2,{ease:Quad.easeIn,delay:.1*e,yPercent:"mouseenter"===n?"-50%":"50%",opacity:0,onComplete:function e(){TweenMax.to(t,"mouseenter"===n?.6:1,{ease:"mouseenter"===n?Expo.easeOut:Elastic.easeOut.config(1,.4),startAt:{yPercent:"mouseenter"===n?"70%":"-70%",opacity:0},yPercent:"0%",opacity:1})}})})}};
//# sourceMappingURL=speakers.min.js.map